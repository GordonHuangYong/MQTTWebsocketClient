<!DOCTYPE html>
<html class="js flexbox canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths" lang="en"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width">
    <title>MQTT Websocket Client</title>

    <link rel="stylesheet" href="./MQTT Websocket Client_files/normalize.css">
    <link rel="stylesheet" href="./MQTT Websocket Client_files/style.css">
    <link rel="stylesheet" href="./MQTT Websocket Client_files/foundation.css">
    <link rel="stylesheet" href="./MQTT Websocket Client_files/jquery.minicolors.css">
    <link rel="stylesheet" href="./MQTT Websocket Client_files/jquery.fancybox.min.css">
<style type="text/css">.fancybox-margin{margin-right:0px;}</style><style id="style-1-cropbar-clipper">/* Copyright 2014 Evernote Corporation. All rights reserved. */
.en-markup-crop-options {
    top: 18px !important;
    left: 50% !important;
    margin-left: -100px !important;
    width: 200px !important;
    border: 2px rgba(255,255,255,.38) solid !important;
    border-radius: 4px !important;
}

.en-markup-crop-options div div:first-of-type {
    margin-left: 0px !important;
}
</style></head>
<body class="notconnected" style="">

<div id="header">
    <div>
        <a href="http://www.hivemq.com/"><img id="headerlogo" src="./MQTT Websocket Client_files/logo.png"></a>
        <span id="headertitle">Websockets Client Showcase</span>
    </div>
</div>
<div id="content" class="row">
<div id="connection" class="row large-12 columns">

    <div class="large-8 columns conniTop">
        <h3>Connection</h3>
    </div>

    <div class="large-1 columns conniStatus">
        <div id="connectionStatus"></div>
    </div>

    <div class="large-2 columns conniArrow">
        <a class="small bottom conniArrow" onclick="websocketclient.render.toggle(&#39;conni&#39;);">
            <div class="icon-arrow-chevron"></div>
        </a>
    </div>
    <div class="large-12 columns" id="conniMain">
        <div class="panel">
            <div class="row">
                <form class="custom">
                    <div class="large-5 columns">
                        <label>Host *</label>
                        <input id="urlInput" type="text" value="mqtt.wt1999.com">
                    </div>

                    <div class="large-1 columns">
                        <label>Port *</label>
                        <input id="portInput" type="text" value="3000">
                    </div>

                    <div class="large-4 columns">
                        <label>ClientID *</label>
                        <input id="clientIdInput" type="text">
                    </div>

                    <div class="large-2 columns">
                        <a id="connectButton" class="small button" onclick="websocketclient.connect();">Connect</a>
                    </div>

                    <div class="large-2 columns">
                        <a id="disconnectButton" class="small button" onclick="websocketclient.disconnect();">Disconnect</a>
                    </div>

                    <div class="large-4 columns">
                        <label>Username</label>
                        <input id="userInput" type="text">
                    </div>

                    <div class="large-3 columns">
                        <label>Password</label>
                        <input id="pwInput" type="password">
                    </div>

                    <div class="large-2 columns">
                        <label>Keep Alive</label>
                        <input id="keepAliveInput" type="text" value="60">
                    </div>

                    <div class="large-1 columns">
                        <label>SSL</label>
                        <input id="sslInput" type="checkbox" class="hidden-field"><span class="custom checkbox"></span>
                    </div>

                    <div class="large-2 columns">
                        <label>Clean Session</label>
                        <input class="checky hidden-field" id="cleanSessionInput" type="checkbox" checked="checked" disabled="disabled"><span class="custom checkbox checked disabled"></span>
                    </div>

                    <div class="large-8 columns">
                        <label>Last-Will Topic</label>
                        <input id="lwTopicInput" type="text">
                    </div>

                    <div class="large-2 columns">
                        <label>Last-Will QoS</label>
                        <select id="lwQosInput" class="hidden-field" data-id="1521984062484-9Pg3H">
                            <option>0</option>
                            <option>1</option>
                            <option>2</option>
                        </select><div class="custom dropdown" data-id="1521984062484-9Pg3H"><a href="#" class="current">0</a><a href="#" class="selector"></a><ul><li class="selected">0</li><li class="">1</li><li class="">2</li></ul></div>
                    </div>

                    <div class="large-2 columns">
                        <label>Last-Will Retain</label>
                        <input class="checky hidden-field" id="LWRInput" type="checkbox"><span class="custom checkbox"></span>
                    </div>

                    <div class="large-12 columns">
                        <label>Last-Will Messsage</label>
                        <textarea id="LWMInput"></textarea>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="empty"></div>
<div id="publish-sub" class="row large-12 columns">
    <div class="columns large-8">
        <div class="large-9 columns publishTop closed">
            <h3>Publish</h3>
        </div>

        <div class="large-3 columns publishArrow closed">
            <a class="small bottom publishArrow closed" onclick="websocketclient.render.toggle(&#39;publish&#39;);">
                <div class="icon-arrow-chevron"></div>
            </a>
        </div>

        <div class="large-12 columns" id="publishMain" style="display: none;">

            <!-- Grid Example -->
            <div class="row panel" id="publishPanel">
                <div class="large-12 columns">
                    <form class="custom">
                        <div class="row">
                            <div class="large-6 columns">
                                <label>Topic</label>
                                <input id="publishTopic" type="text" value="testtopic/1">
                            </div>
                            <div class="large-2 columns">
                                <label for="publishQoSInput">QoS</label>
                                <select id="publishQoSInput" class="small hidden-field" data-id="1521984062495-2aamR">
                                    <option>0</option>
                                    <option>1</option>
                                    <option>2</option>
                                </select><div class="custom dropdown small" data-id="1521984062495-2aamR"><a href="#" class="current">0</a><a href="#" class="selector"></a><ul><li class="selected">0</li><li class="">1</li><li class="">2</li></ul></div>
                            </div>
                            <div class="large-2 columns">
                                <label>Retain</label>
                                <input id="publishRetain" type="checkbox" class="hidden-field"><span class="custom checkbox"></span>
                            </div>
                            <div class="large-2 columns">
                                <a class="small button" id="publishButton" onclick="websocketclient.publish($(&#39;#publishTopic&#39;).val(),hex2bin($(&#39;#publishPayload&#39;).val()),parseInt($(&#39;#publishQoSInput&#39;).val(),10),$(&#39;#publishRetain&#39;).is(&#39;:checked&#39;))">Publish</a>
                            </div>
                        </div>
                        <div class="row">
                            <div class="large-12 columns">
                                <label>Message</label>
                                <textarea id="publishPayload"></textarea>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="empty"></div>
        <div class="large-9 columns messagesTop closed">
            <h3>Messages</h3>
        </div>

        <div class="large-3 columns messagesArrow closed">
            <a class="small bottom messagesArrow closed" onclick="websocketclient.render.toggle(&#39;messages&#39;);">
                <div class="icon-arrow-chevron"></div>
            </a>
        </div>

        <div class="large-12 columns" id="messagesMain" style="display: none;">

            <!-- Grid Example -->
            <div class="row panel">
                <div class="large-12 columns">
                    <form class="custom">
                        <!--<div class="row">-->
                        <!--<div class="large-10 columns">-->
                        <!--<label>Filter</label>-->
                        <!--<input id="filterString" type="text">-->
                        <!--</div>-->

                        <!--<div class="large-2 columns">-->
                        <!--<a class="small button" id="filterButton"-->
                        <!--onclick="websocketclient.filter($('#filterString').val())">Filter</a>-->
                        <!--</div>-->
                        <!--</div>-->

                    </form>
                    <div class="row">
                        <ul id="messEdit" class="disc">

                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="columns large-4">

        <div class="large-8 columns subTop closed">
            <h3>Subscriptions</h3>
        </div>

        <div class="large-3 columns subArrow closed">
            <a class="small bottom subArrow closed" onclick="websocketclient.render.toggle(&#39;sub&#39;);">
                <div class="icon-arrow-chevron"></div>
            </a>
        </div>
        <div class="large-12 columns" id="subMain" style="display: none;">
            <div class="row panel">
                <div class="large-12 columns">

                    <a id="addSubButton" href="#data" class="small button addSubButton">Add New Topic Subscription</a>

                    <div style="display:none">
                        <div id="data">
                            <form class="custom">
                                <div class="row large-12 columns">
                                    <div class="large-4 columns">
                                        <label>Color</label>
                                        <div class="minicolors minicolors-theme-default minicolors-position-bottom minicolors-position-left"><input class="color minicolors-input" id="colorChooser" type="hidden" size="7" value=""><span class="minicolors-swatch"><span class="minicolors-swatch-color"></span></span><div class="minicolors-panel minicolors-slider-hue"><div class="minicolors-slider"><div class="minicolors-picker" style="top: 0px;"></div></div><div class="minicolors-opacity-slider"><div class="minicolors-picker"></div></div><div class="minicolors-grid" style="background-color: rgb(255, 0, 0);"><div class="minicolors-grid-inner"></div><div class="minicolors-picker" style="top: 150px; left: 0px;"><div></div></div></div></div></div>
                                    </div>
                                    <div class="large-5 columns">
                                        <label for="QoSInput">QoS</label>
                                        <select id="QoSInput" class="small hidden-field" data-id="1521984062497-Q87Tl">
                                            <option>2</option>
                                            <option>1</option>
                                            <option>0</option>
                                        </select><div class="custom dropdown small" data-id="1521984062497-Q87Tl"><a href="#" class="current">2</a><a href="#" class="selector"></a><ul><li class="selected">2</li><li class="">1</li><li class="">0</li></ul></div>
                                    </div>
                                    <div class="large-3 columns">
                                        <a class="small button" id="subscribeButton" onclick="if(websocketclient.subscribe($(&#39;#subscribeTopic&#39;).val(),parseInt($(&#39;#QoSInput&#39;).val()),$(&#39;#colorChooser&#39;).val().substring(1))){$.fancybox.close();}">Subscribe</a>
                                    </div>
                                </div>
                                <div class="row large-12 columns">
                                    <div class="large-12 columns">
                                        <label>Topic</label>
                                        <input id="subscribeTopic" type="text" value="testtopic/#">
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <ul id="innerEdit" class="disc">

                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<script src="./MQTT Websocket Client_files/jquery.min.js"></script>
<script src="./MQTT Websocket Client_files/jquery-ui.min.js"></script>
<script src="./MQTT Websocket Client_files/lodash.min.js"></script>
<script src="./MQTT Websocket Client_files/jquery.fancybox.min.js"></script>

<script src="./MQTT Websocket Client_files/foundation.min.js"></script>
<script src="./MQTT Websocket Client_files/foundation.forms.min.js"></script>
<script src="./MQTT Websocket Client_files/modernizr.min.js"></script>
<script src="./MQTT Websocket Client_files/moment.min.js"></script>
<script src="./MQTT Websocket Client_files/jquery.minicolors.min.js"></script>
<script src="./MQTT Websocket Client_files/mqttws31.js"></script>
<script src="./MQTT Websocket Client_files/encoder.js"></script>
<script src="./MQTT Websocket Client_files/app.js"></script>
<script src="./MQTT Websocket Client_files/config.js"></script>

<script>

    function randomString(length) {
        var text = "";
        var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
        for (var i = 0; i < length; i++)
            text += possible.charAt(Math.floor(Math.random() * possible.length));
        return text;
    }

    function hex2bin(hex) {
        if ( !hex.match(/0x\w+/) ) return hex;

        var buf = new ArrayBuffer(hex.length/2-1); // 2 bytes for each char
        var bufView = new Uint8Array(buf);
        
        for(var i = 2; i <= hex.length-2; i+=2) {
            bufView[i/2-1] = parseInt(hex.substr(i, 2), 16);
        }
        return buf;
    }

    $(document).foundation();
    $(document).ready(function () {

        $('#urlInput').val(websocketserver);
        $('#portInput').val(websocketport);
        $('#clientIdInput').val('clientId-' + randomString(10));

        $('#colorChooser').minicolors();

        $("#addSubButton").fancybox({
            'afterShow': function () {
                var rndColor = websocketclient.getRandomColor();
                $("#colorChooser").minicolors('value', rndColor);
            }
        });

        websocketclient.render.toggle('publish');
        websocketclient.render.toggle('messages');
        websocketclient.render.toggle('sub');
    });
</script>


</body></html>